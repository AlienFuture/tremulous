language: cpp
sudo: required
dist: trusty

git:
    depth: 5

script:
    - ./misc/travis-ci-build.sh

notifications:
    email:
        on_success: change
        on_failure: change

matrix:
    #  include: 
    #    - os: linux
    #      env: PLATFORM=mingw32 ARCH=x86
    #      compiler: gcc
    #      before_install:
    #      - sudo apt-add-repository ppa:zoogie/sdl2-snapshots -y
    #      - sudo dpkg --add-architecture i386
    #      - sudo apt-get update
    #      - sudo -E apt-get -yq --no-install-suggests --no-install-recommends --force-yes upgrade gcc-multilib g++-multilib mingw-w64 mingw-w64 gcc-mingw-w64 g++-mingw-w64 libgl1-mesa-dev libsdl2-dev libfreetype6-dev
    #      addons:
    #        apt:
    #          sources:
    #          - ubuntu-toolchain-r-test

    - os: linux
      env: PLATFORM=mingw32 ARCH=x86_64
      compiler: gcc
      before_install:
      - sudo apt-add-repository ppa:zoogie/sdl2-snapshots -y
      addons:
        apt:
          sources:
          - ubuntu-toolchain-r-test
          - zoogie/sdl2-snapshots
          packages:
          - libgl1-mesa-dev
          - libsdl2-dev
          - libfreetype6-dev
          - mingw-w64
          - g++-mingw-w64
          - g++-multilib

    #    - os: linux
    #      env: USE_CODEC_VORBIS=1 USE_FREETYPE=1 ARCH=x86
    #      compiler: gcc
    #      addons:
    #        apt:
    #          sources:
    #          - ubuntu-toolchain-r-test
    #          - zoogie/sdl2-snapshots
    #          packages:
    #          - gcc-5-multilib
    #          - g++-5-multilib
    #          - libgl1-mesa-dev
    #          - libsdl2-dev
    #          - libfreetype6-dev

    - os: linux
      env: USE_CODEC_VORBIS=1 USE_FREETYPE=1 ARCH=x86_64
      compiler: gcc
      addons:
        apt:
          sources:
          - ubuntu-toolchain-r-test
          - zoogie/sdl2-snapshots
          packages:
          - gcc-5
          - g++-5
          - libgl1-mesa-dev
          - libsdl2-dev
          - libfreetype6-dev

    - os: osx
      osx_image: xcode7
      compiler: clang
      env: USE_CODEC_VORBIS=1 USE_FREETYPE=1 ARCH=x86_64
      before_install:
      - brew update
      - brew install freetype --universal

    - os: osx
      osx_image: xcode7
      compiler: clang 
      env: USE_CODEC_VORBIS=1 USE_FREETYPE=1 ARCH=x86
      before_install:
      - brew update
      - brew install freetype --universal

